extends layout.pug

block content
  link(rel="stylesheet", href="/stylesheets/vault.css")
  h1= game.name
  h2= game.publisher
  h2= game.synopsis
  div
    img(src=game.img_url id='gameImg')
  if loggedInUser
    form(action="", method="get")
      select(name='collection_id' id='collection_id' required)
        each collection in userCollections
          option(value=`${collection.id}`)= collection.name
    button(type="submit" id='gamePageAdd') Add to Collection
  if reviews
    ul
      each review in reviews
        div(class="ind-review" id=`review-container-${review.id}`)
          p #{review.User.username} rated
            span=review.stars
          p=review.content
          if loggedInUser === review.user_id
            button(class="delete-btn" id=`delete-review-${review.id}`) Delete
            button(class="edit-btn" id=`edit-review-${review.id}`) Edit
            form(class='hidden' id=`edit-form-review-${review.id}`)
              label Content
              input(type='text' name='content' value=review.content id=`${review.id}-edit-content`)
              button(type='submit' name='review-submit' id=`edit-submit-${review.id}`) Submit
  if loggedInUser
    form(action=`` method="get")
      select(name='ratings' id='ratings' required)
        option(value='1') 1
        option(value='2') 2
        option(value='3') 3
        option(value='4') 4
        option(value='5') 5
      textarea(name="content" id="content" required)
      input(type="button" id="postReview" value='Add review')

  script(src='/javascripts/postReview.js')
  script(src='/javascripts/gamePageAdd.js')
  script(src='/javascripts/deleteReview.js')
  script(src='/javascripts/editReview.js')
